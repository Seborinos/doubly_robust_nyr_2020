"0","n_simu <- 100"
"0","n_obs <- 300"
"0",""
"0","nested_df <- "
"0","  purrr::map2_dfr(1:n_simu, rep(n_obs, n_simu), simu_observational_data) %>% "
"0","  group_by(simu_id) %>% "
"0","  nest() %>% "
"0","  mutate("
"0","    prop_model     = map(data, prop_score_model),"
"0","    mean_model     = map(data, mean_outcome_model),"
"0","    naive_estimate = map(data, naive_estimator),"
"0","    model_estimate = map(data, outcome_model_estimator),"
"0","    ipw_estimate   = map2(data, prop_model, ipw_estimator),"
"0","    dr_estimate    = pmap(list(data, prop_model, mean_model), dr_estimator)"
"0","  ) %>% "
"0","  ungroup() %>% "
"0","  unnest(c(naive_estimate, model_estimate, ipw_estimate, ipw_estimate, dr_estimate))"
